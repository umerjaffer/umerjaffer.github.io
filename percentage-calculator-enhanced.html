<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Percentage Calculator</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4cb5ae;
            --light-bg: #f7f9fc;
            --border-color: #e2e8f0;
            --error-color: #e53e3e;
            --success-color: #38a169;
            --text-color: #2d3748;
            --light-text: #718096;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .description {
            color: var(--light-text);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: var(--light-text);
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }
        
        .tab:hover:not(.active) {
            color: var(--secondary-color);
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        .calculator-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .calculator {
            display: none;
        }
        
        .calculator.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 6px;
            color: var(--light-text);
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.2s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }
        
        .error-message {
            color: var(--error-color);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .calculate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex: 1;
        }
        
        .calculate-btn:hover {
            background-color: var(--secondary-color);
        }
        
        .reset-btn {
            background-color: white;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .reset-btn:hover {
            background-color: var(--light-bg);
            border-color: var(--light-text);
        }
        
        .result-container {
            margin-top: 25px;
            padding: 20px;
            background-color: var(--light-bg);
            border-radius: 6px;
            display: none;
        }
        
        .result-container.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .result-text {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .calculation-steps {
            font-size: 16px;
            color: var(--light-text);
            margin-bottom: 15px;
            padding: 10px;
            background-color: white;
            border-radius: 4px;
            border-left: 4px solid var(--primary-color);
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .copy-btn {
            background-color: transparent;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .copy-btn:hover {
            background-color: var(--light-bg);
            border-color: var(--primary-color);
        }
        
        .tooltip {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            display: none;
        }
        
        .tooltip.show {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        
        .history-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .history-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .history-title h2 {
            color: var(--primary-color);
        }
        
        .clear-history {
            background-color: transparent;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .clear-history:hover {
            background-color: var(--light-bg);
            border-color: var(--error-color);
            color: var(--error-color);
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }
        
        .history-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item:hover {
            background-color: var(--light-bg);
        }
        
        .history-category {
            font-size: 14px;
            color: var(--light-text);
            margin-bottom: 5px;
        }
        
        .history-calculation {
            font-size: 16px;
            font-weight: 500;
        }
        
        .history-result {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 5px;
        }
        
        .no-history {
            padding: 20px;
            text-align: center;
            color: var(--light-text);
        }
        
        footer {
            text-align: center;
            padding: 20px 0;
            color: var(--light-text);
            font-size: 14px;
        }
        
        footer a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .calculator-container {
                padding: 20px;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Percentage Calculator</h1>
            <p class="description">A simple and intuitive tool for all your percentage calculation needs.</p>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="calculator1">What is X% of Y?</button>
            <button class="tab" data-tab="calculator2">X is what percent of Y?</button>
            <button class="tab" data-tab="calculator3">Percentage Increase/Decrease</button>
            <button class="tab" data-tab="calculator4">Percentage Change</button>
            <button class="tab" data-tab="calculator5">Percentage to Fraction</button>
            <button class="tab" data-tab="calculator6">Fraction to Percentage</button>
        </div>
        
        <div class="calculator-container">
            <!-- Calculator 1: What is X% of Y? -->
            <div class="calculator active" id="calculator1">
                <h2>What is X% of Y?</h2>
                <p>Calculate a percentage of a number.</p>
                
                <div class="input-group">
                    <label for="percent1">Percentage (X)</label>
                    <input type="number" id="percent1" placeholder="Enter percentage" step="any">
                    <div class="error-message" id="percent1-error">Please enter a valid number</div>
                </div>
                
                <div class="input-group">
                    <label for="value1">Value (Y)</label>
                    <input type="number" id="value1" placeholder="Enter number" step="any">
                    <div class="error-message" id="value1-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate1">Calculate</button>
                    <button class="reset-btn" id="reset1">Reset</button>
                </div>
                
                <div class="result-container" id="result1">
                    <p class="result-text">Result:</p>
                    <div class="calculation-steps" id="steps1"></div>
                    <p class="result-value" id="result1-value">0</p>
                    <button class="copy-btn" id="copy1">
                        Copy result
                        <div class="tooltip" id="tooltip1">Copied!</div>
                    </button>
                </div>
            </div>
            
            <!-- Calculator 2: X is what percent of Y? -->
            <div class="calculator" id="calculator2">
                <h2>X is what percent of Y?</h2>
                <p>Find what percentage one number is of another.</p>
                
                <div class="input-group">
                    <label for="value2a">Value (X)</label>
                    <input type="number" id="value2a" placeholder="Enter first number" step="any">
                    <div class="error-message" id="value2a-error">Please enter a valid number</div>
                </div>
                
                <div class="input-group">
                    <label for="value2b">Value (Y)</label>
                    <input type="number" id="value2b" placeholder="Enter second number" step="any">
                    <div class="error-message" id="value2b-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate2">Calculate</button>
                    <button class="reset-btn" id="reset2">Reset</button>
                </div>
                
                <div class="result-container" id="result2">
                    <p class="result-text">Result:</p>
                    <div class="calculation-steps" id="steps2"></div>
                    <p class="result-value" id="result2-value">0%</p>
                    <button class="copy-btn" id="copy2">
                        Copy result
                        <div class="tooltip" id="tooltip2">Copied!</div>
                    </button>
                </div>
            </div>
            
            <!-- Calculator 3: Percentage Increase/Decrease -->
            <div class="calculator" id="calculator3">
                <h2>Percentage Increase/Decrease</h2>
                <p>Calculate the percentage change between two values.</p>
                
                <div class="input-group">
                    <label for="initial">Initial Value</label>
                    <input type="number" id="initial" placeholder="Enter initial value" step="any">
                    <div class="error-message" id="initial-error">Please enter a valid number</div>
                </div>
                
                <div class="input-group">
                    <label for="final">Final Value</label>
                    <input type="number" id="final" placeholder="Enter final value" step="any">
                    <div class="error-message" id="final-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate3">Calculate</button>
                    <button class="reset-btn" id="reset3">Reset</button>
                </div>
                
                <div class="result-container" id="result3">
                    <p class="result-text">Percentage Change:</p>
                    <div class="calculation-steps" id="steps3"></div>
                    <p class="result-value" id="result3-value">0%</p>
                    <button class="copy-btn" id="copy3">
                        Copy result
                        <div class="tooltip" id="tooltip3">Copied!</div>
                    </button>
                </div>
            </div>
            
            <!-- Calculator 4: Percentage Change -->
            <div class="calculator" id="calculator4">
                <h2>Percentage Change</h2>
                <p>Calculate a new value after applying a percentage change.</p>
                
                <div class="input-group">
                    <label for="original">Original Value</label>
                    <input type="number" id="original" placeholder="Enter original value" step="any">
                    <div class="error-message" id="original-error">Please enter a valid number</div>
                </div>
                
                <div class="input-group">
                    <label for="percent-change">Percentage Change</label>
                    <input type="number" id="percent-change" placeholder="Enter percentage (positive or negative)" step="any">
                    <div class="error-message" id="percent-change-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate4">Calculate</button>
                    <button class="reset-btn" id="reset4">Reset</button>
                </div>
                
                <div class="result-container" id="result4">
                    <p class="result-text">New Value:</p>
                    <div class="calculation-steps" id="steps4"></div>
                    <p class="result-value" id="result4-value">0</p>
                    <button class="copy-btn" id="copy4">
                        Copy result
                        <div class="tooltip" id="tooltip4">Copied!</div>
                    </button>
                </div>
            </div>
            
            <!-- Calculator 5: Percentage to Fraction -->
            <div class="calculator" id="calculator5">
                <h2>Percentage to Fraction</h2>
                <p>Convert a percentage to a simplified fraction.</p>
                
                <div class="input-group">
                    <label for="percent-input">Percentage</label>
                    <input type="number" id="percent-input" placeholder="Enter percentage" step="any">
                    <div class="error-message" id="percent-input-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate5">Calculate</button>
                    <button class="reset-btn" id="reset5">Reset</button>
                </div>
                
                <div class="result-container" id="result5">
                    <p class="result-text">Fraction:</p>
                    <div class="calculation-steps" id="steps5"></div>
                    <p class="result-value" id="result5-value">0</p>
                    <button class="copy-btn" id="copy5">
                        Copy result
                        <div class="tooltip" id="tooltip5">Copied!</div>
                    </button>
                </div>
            </div>
            
            <!-- Calculator 6: Fraction to Percentage -->
            <div class="calculator" id="calculator6">
                <h2>Fraction to Percentage</h2>
                <p>Convert a fraction to a percentage.</p>
                
                <div class="input-group">
                    <label for="numerator">Numerator</label>
                    <input type="number" id="numerator" placeholder="Enter numerator" step="any">
                    <div class="error-message" id="numerator-error">Please enter a valid number</div>
                </div>
                
                <div class="input-group">
                    <label for="denominator">Denominator</label>
                    <input type="number" id="denominator" placeholder="Enter denominator" step="any">
                    <div class="error-message" id="denominator-error">Please enter a valid number</div>
                </div>
                
                <div class="button-group">
                    <button class="calculate-btn" id="calculate6">Calculate</button>
                    <button class="reset-btn" id="reset6">Reset</button>
                </div>
                
                <div class="result-container" id="result6">
                    <p class="result-text">Percentage:</p>
                    <div class="calculation-steps" id="steps6"></div>
                    <p class="result-value" id="result6-value">0%</p>
                    <button class="copy-btn" id="copy6">
                        Copy result
                        <div class="tooltip" id="tooltip6">Copied!</div>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- History Section -->
        <div class="history-container">
            <div class="history-title">
                <h2>Calculation History</h2>
                <button class="clear-history" id="clear-history">Clear History</button>
            </div>
            <div class="history-list" id="history-list">
                <div class="no-history">No calculations yet</div>
            </div>
        </div>
        
        <footer>
            <p>&copy; 2025 Percentage Calculator. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact</a>
            </div>
        </footer>
    </div>
    
    <script>
    // Tab switching functionality
const tabs = document.querySelectorAll('.tab');
const calculators = document.querySelectorAll('.calculator');

tabs.forEach(tab => {
    tab.addEventListener('click', () => {
        const targetId = tab.getAttribute('data-tab');
        
        // Update active tab
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show target calculator
        calculators.forEach(calc => {
            calc.classList.remove('active');
            if (calc.id === targetId) {
                calc.classList.add('active');
            }
        });
        
        // Hide all results when switching tabs
        document.querySelectorAll('.result-container').forEach(container => {
            container.classList.remove('show');
        });
    });
});

// Form validation function
function validateInput(input, errorElement) {
    const value = input.value.trim();
    if (value === '' || isNaN(value)) {
        errorElement.style.display = 'block';
        return false;
    } else {
        errorElement.style.display = 'none';
        return true;
    }
}

// History management
let calculationHistory = [];

function addToHistory(category, calculation, result) {
    calculationHistory.unshift({
        category,
        calculation,
        result,
        timestamp: new Date()
    });
    
    updateHistoryDisplay();
}

function updateHistoryDisplay() {
    const historyList = document.getElementById('history-list');
    
    if (calculationHistory.length === 0) {
        historyList.innerHTML = '<div class="no-history">No calculations yet</div>';
        return;
    }
    
    historyList.innerHTML = '';
    
    calculationHistory.forEach(item => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        
        historyItem.innerHTML = `
            <div class="history-category">${item.category}</div>
            <div class="history-calculation">${item.calculation}</div>
            <div class="history-result">Result: ${item.result}</div>
        `;
        
        historyList.appendChild(historyItem);
    });
}

// Clear history
document.getElementById('clear-history').addEventListener('click', () => {
    calculationHistory = [];
    updateHistoryDisplay();
});

// Setup copy button functionality
function setupCopyButton(copyBtnId, resultValueId, tooltipId) {
    const copyBtn = document.getElementById(copyBtnId);
    const resultValue = document.getElementById(resultValueId);
    const tooltip = document.getElementById(tooltipId);
    
    copyBtn.addEventListener('click', () => {
        const textToCopy = resultValue.textContent;
        navigator.clipboard.writeText(textToCopy).then(() => {
            tooltip.classList.add('show');
            setTimeout(() => {
                tooltip.classList.remove('show');
            }, 2000);
        });
    });
}

// GCD function for simplifying fractions
function gcd(a, b) {
    a = Math.abs(a);
    b = Math.abs(b);
    while (b) {
        let t = b;
        b = a % b;
        a = t;
    }
    return a;
}

// Setup calculator functions

// Calculator 1: What is X% of Y?
function setupCalculator1() {
    const percentInput = document.getElementById('percent1');
    const valueInput = document.getElementById('value1');
    const calculateBtn = document.getElementById('calculate1');
    const resetBtn = document.getElementById('reset1');
    const resultContainer = document.getElementById('result1');
    const steps = document.getElementById('steps1');
    const resultValue = document.getElementById('result1-value');
    
    calculateBtn.addEventListener('click', () => {
        const percentError = document.getElementById('percent1-error');
        const valueError = document.getElementById('value1-error');
        
        const isPercentValid = validateInput(percentInput, percentError);
        const isValueValid = validateInput(valueInput, valueError);
        
        if (isPercentValid && isValueValid) {
            const percent = parseFloat(percentInput.value);
            const value = parseFloat(valueInput.value);
            const result = (percent / 100) * value;
            
            // Show calculation steps
            steps.innerHTML = `
                <p>${percent}% of ${value}</p>
                <p>= ${percent} ÷ 100 × ${value}</p>
                <p>= ${(percent / 100).toFixed(4)} × ${value}</p>
            `;
            
            resultValue.textContent = result.toLocaleString(undefined, { 
                minimumFractionDigits: 0,
                maximumFractionDigits: 4
            });
            
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "What is X% of Y?",
                `${percent}% of ${value}`,
                result.toLocaleString(undefined, { 
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 4
                })
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        percentInput.value = '';
        valueInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('percent1-error').style.display = 'none';
        document.getElementById('value1-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy1', 'result1-value', 'tooltip1');
}

// Calculator 2: X is what percent of Y?
function setupCalculator2() {
    const value2aInput = document.getElementById('value2a');
    const value2bInput = document.getElementById('value2b');
    const calculateBtn = document.getElementById('calculate2');
    const resetBtn = document.getElementById('reset2');
    const resultContainer = document.getElementById('result2');
    const steps = document.getElementById('steps2');
    const resultValue = document.getElementById('result2-value');
    
    calculateBtn.addEventListener('click', () => {
        const value2aError = document.getElementById('value2a-error');
        const value2bError = document.getElementById('value2b-error');
        
        const isValue2aValid = validateInput(value2aInput, value2aError);
        const isValue2bValid = validateInput(value2bInput, value2bError);
        
        if (isValue2aValid && isValue2bValid) {
            const valueA = parseFloat(value2aInput.value);
            const valueB = parseFloat(value2bInput.value);
            
            if (valueB === 0) {
                value2bError.textContent = "Cannot divide by zero";
                value2bError.style.display = 'block';
                return;
            }
            
            const result = (valueA / valueB) * 100;
            
            // Show calculation steps
            steps.innerHTML = `
                <p>${valueA} is what percent of ${valueB}?</p>
                <p>= (${valueA} ÷ ${valueB}) × 100%</p>
                <p>= ${(valueA / valueB).toFixed(4)} × 100%</p>
            `;
            
            resultValue.textContent = result.toLocaleString(undefined, { 
                minimumFractionDigits: 0,
                maximumFractionDigits: 2
            }) + '%';
            
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "X is what percent of Y?",
                `${valueA} is what percent of ${valueB}?`,
                result.toLocaleString(undefined, { 
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                }) + '%'
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        value2aInput.value = '';
        value2bInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('value2a-error').style.display = 'none';
        document.getElementById('value2b-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy2', 'result2-value', 'tooltip2');
}

// Calculator 3: Percentage Increase/Decrease
function setupCalculator3() {
    const initialInput = document.getElementById('initial');
    const finalInput = document.getElementById('final');
    const calculateBtn = document.getElementById('calculate3');
    const resetBtn = document.getElementById('reset3');
    const resultContainer = document.getElementById('result3');
    const steps = document.getElementById('steps3');
    const resultValue = document.getElementById('result3-value');
    
    calculateBtn.addEventListener('click', () => {
        const initialError = document.getElementById('initial-error');
        const finalError = document.getElementById('final-error');
        
        const isInitialValid = validateInput(initialInput, initialError);
        const isFinalValid = validateInput(finalInput, finalError);
        
        if (isInitialValid && isFinalValid) {
            const initialValue = parseFloat(initialInput.value);
            const finalValue = parseFloat(finalInput.value);
            
            if (initialValue === 0) {
                initialError.textContent = "Initial value cannot be zero for percentage calculation";
                initialError.style.display = 'block';
                return;
            }
            
            const change = finalValue - initialValue;
            const percentageChange = (change / Math.abs(initialValue)) * 100;
            
            // Show calculation steps
            steps.innerHTML = `
                <p>Initial value: ${initialValue}</p>
                <p>Final value: ${finalValue}</p>
                <p>Change: ${finalValue} - ${initialValue} = ${change.toFixed(2)}</p>
                <p>Percentage change: (${change.toFixed(2)} ÷ ${Math.abs(initialValue)}) × 100% = ${percentageChange.toFixed(2)}%</p>
            `;
            
            const resultText = percentageChange >= 0 ? 
                `${percentageChange.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 2 })}% increase` : 
                `${Math.abs(percentageChange).toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 2 })}% decrease`;
            
            resultValue.textContent = resultText;
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "Percentage Increase/Decrease",
                `Change from ${initialValue} to ${finalValue}`,
                resultText
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        initialInput.value = '';
        finalInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('initial-error').style.display = 'none';
        document.getElementById('final-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy3', 'result3-value', 'tooltip3');
}

// Calculator 4: Percentage Change
function setupCalculator4() {
    const originalInput = document.getElementById('original');
    const percentChangeInput = document.getElementById('percent-change');
    const calculateBtn = document.getElementById('calculate4');
    const resetBtn = document.getElementById('reset4');
    const resultContainer = document.getElementById('result4');
    const steps = document.getElementById('steps4');
    const resultValue = document.getElementById('result4-value');
    
    calculateBtn.addEventListener('click', () => {
        const originalError = document.getElementById('original-error');
        const percentChangeError = document.getElementById('percent-change-error');
        
        const isOriginalValid = validateInput(originalInput, originalError);
        const isPercentChangeValid = validateInput(percentChangeInput, percentChangeError);
        
        if (isOriginalValid && isPercentChangeValid) {
            const originalValue = parseFloat(originalInput.value);
            const percentChange = parseFloat(percentChangeInput.value);
            
            const change = originalValue * (percentChange / 100);
            const newValue = originalValue + change;
            
            // Show calculation steps
            steps.innerHTML = `
                <p>Original value: ${originalValue}</p>
                <p>Percentage change: ${percentChange}%</p>
                <p>Amount of change: ${originalValue} × (${percentChange} ÷ 100) = ${change.toFixed(4)}</p>
                <p>New value: ${originalValue} + ${change.toFixed(4)} = ${newValue.toFixed(4)}</p>
            `;
            
            resultValue.textContent = newValue.toLocaleString(undefined, { 
                minimumFractionDigits: 0,
                maximumFractionDigits: 4
            });
            
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "Percentage Change",
                `${originalValue} with ${percentChange}% change`,
                newValue.toLocaleString(undefined, { 
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 4
                })
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        originalInput.value = '';
        percentChangeInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('original-error').style.display = 'none';
        document.getElementById('percent-change-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy4', 'result4-value', 'tooltip4');
}

// Calculator 5: Percentage to Fraction
function setupCalculator5() {
    const percentInput = document.getElementById('percent-input');
    const calculateBtn = document.getElementById('calculate5');
    const resetBtn = document.getElementById('reset5');
    const resultContainer = document.getElementById('result5');
    const steps = document.getElementById('steps5');
    const resultValue = document.getElementById('result5-value');
    
    calculateBtn.addEventListener('click', () => {
        const percentError = document.getElementById('percent-input-error');
        
        const isPercentValid = validateInput(percentInput, percentError);
        
        if (isPercentValid) {
            const percent = parseFloat(percentInput.value);
            
            // Convert percentage to a fraction
            let numerator = percent;
            let denominator = 100;
            
            // Simplify the fraction
            const divisor = gcd(numerator, denominator);
            numerator = numerator / divisor;
            denominator = denominator / divisor;
            
            // Handle decimal percentages
            if (!Number.isInteger(percent)) {
                const stringPercent = percent.toString();
                const decimalPlaces = stringPercent.includes('.') ? 
                    stringPercent.split('.')[1].length : 0;
                
                if (decimalPlaces > 0) {
                    numerator = percent * Math.pow(10, decimalPlaces);
                    denominator = 100 * Math.pow(10, decimalPlaces);
                    
                    // Simplify again
                    const newDivisor = gcd(numerator, denominator);
                    numerator = numerator / newDivisor;
                    denominator = denominator / newDivisor;
                }
            }
            
            // Format the result
            let result = "";
            if (numerator % denominator === 0) {
                result = (numerator / denominator).toString();
            } else {
                result = `${Math.round(numerator)}/${Math.round(denominator)}`;
            }
            
            // Show calculation steps
            steps.innerHTML = `
                <p>${percent}% as a fraction:</p>
                <p>= ${percent} ÷ 100</p>
                <p>= ${percent / 100}</p>
                <p>= ${result}</p>
            `;
            
            resultValue.textContent = result;
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "Percentage to Fraction",
                `${percent}% converted to fraction`,
                result
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        percentInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('percent-input-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy5', 'result5-value', 'tooltip5');
}

// Calculator 6: Fraction to Percentage
function setupCalculator6() {
    const numeratorInput = document.getElementById('numerator');
    const denominatorInput = document.getElementById('denominator');
    const calculateBtn = document.getElementById('calculate6');
    const resetBtn = document.getElementById('reset6');
    const resultContainer = document.getElementById('result6');
    const steps = document.getElementById('steps6');
    const resultValue = document.getElementById('result6-value');
    
    calculateBtn.addEventListener('click', () => {
        const numeratorError = document.getElementById('numerator-error');
        const denominatorError = document.getElementById('denominator-error');
        
        const isNumeratorValid = validateInput(numeratorInput, numeratorError);
        const isDenominatorValid = validateInput(denominatorInput, denominatorError);
        
        if (isNumeratorValid && isDenominatorValid) {
            const numerator = parseFloat(numeratorInput.value);
            const denominator = parseFloat(denominatorInput.value);
            
            if (denominator === 0) {
                denominatorError.textContent = "Cannot divide by zero";
                denominatorError.style.display = 'block';
                return;
            }
            
            const percentage = (numerator / denominator) * 100;
            
            // Show calculation steps
            steps.innerHTML = `
                <p>${numerator}/${denominator} as a percentage:</p>
                <p>= (${numerator} ÷ ${denominator}) × 100%</p>
                <p>= ${(numerator / denominator).toFixed(4)} × 100%</p>
                <p>= ${percentage.toFixed(2)}%</p>
            `;
            
            resultValue.textContent = percentage.toLocaleString(undefined, { 
                minimumFractionDigits: 0,
                maximumFractionDigits: 2
            }) + '%';
            
            resultContainer.classList.add('show');
            
            // Add to history
            addToHistory(
                "Fraction to Percentage",
                `${numerator}/${denominator} converted to percentage`,
                percentage.toLocaleString(undefined, { 
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                }) + '%'
            );
        }
    });
    
    resetBtn.addEventListener('click', () => {
        numeratorInput.value = '';
        denominatorInput.value = '';
        resultContainer.classList.remove('show');
        document.getElementById('numerator-error').style.display = 'none';
        document.getElementById('denominator-error').style.display = 'none';
    });
    
    // Setup copy button
    setupCopyButton('copy6', 'result6-value', 'tooltip6');
}

// Initialize all calculators
document.addEventListener('DOMContentLoaded', () => {
    setupCalculator1();
    setupCalculator2();
    setupCalculator3();
    setupCalculator4();
    setupCalculator5();
    setupCalculator6();
    updateHistoryDisplay();
});

</script>